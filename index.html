<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Effect + Lit + Tailwind Demo</title>
    <link rel="stylesheet" href="./index.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <script type="module" src="./lib/main.ts"></script>
    <script
      defer
      src="https://umami.lloydrichards.dev/script.js"
      data-website-id="%VITE_UMAMI_WEBSITE_ID%"
    ></script>
  </head>
  <body>
    <script>
      (function () {
        const theme = localStorage.getItem("effect-box-theme") || "system";
        const isDark =
          theme === "dark" ||
          (theme === "system" &&
            window.matchMedia("(prefers-color-scheme: dark)").matches);
        if (isDark) {
          document.documentElement.classList.add("dark");
        }
      })();
    </script>
    <style>
      :root {
        --destructive: oklch(0.65 0.22 28);
        --destructive-foreground: oklch(0.985 0.001 106.423);

        --primary: oklch(0.65 0.25 264);
        --primary-foreground: oklch(0.985 0.001 106.423);
      }

      .dark {
        --destructive: oklch(0.72 0.19 28);
        --destructive-foreground: oklch(0.985 0.001 106.423);

        --primary: oklch(0.75 0.18 264);
        --primary-foreground: oklch(0.147 0.004 49.25);
      }
    </style>
    <div class="container">
      <header class="header">
        <div style="position: absolute; top: 1rem; right: 1rem">
          <theme-toggle></theme-toggle>
        </div>
        <div class="logos">
          <a href="https://vitejs.dev" target="_blank">
            <img src="/lib/assets/vite.svg" class="logo" alt="Vite logo" />
          </a>
          <a href="https://lit.dev" target="_blank">
            <img src="/lib/assets/lit.svg" class="logo" alt="Lit logo" />
          </a>
          <a href="https://tailwindcss.com/" target="_blank">
            <img
              src="/lib/assets/tailwind.svg"
              class="logo"
              alt="Tailwind logo"
            />
          </a>
          <a href="https://effect.website/" target="_blank">
            <img
              src="/lib/assets/effect_dark.svg"
              class="logo"
              alt="Effect logo"
            />
          </a>
        </div>
        <h1>Effect + Lit + Tailwind Components</h1>
        <p>
          A showcase of web components built with Lit, styled with Tailwind CSS,
          and powered by Effect for state management and reactive programming.
        </p>
      </header>
      <ui-tabs default-value="state" style="width: 100%; max-width: 1200px">
        <ui-tabs-list style="margin-bottom: 2rem">
          <ui-tabs-trigger value="state">State Management</ui-tabs-trigger>
          <ui-tabs-trigger value="forms">Forms & Input</ui-tabs-trigger>
          <ui-tabs-trigger value="interactive">Interactive & Games</ui-tabs-trigger>
          <ui-tabs-trigger value="ai">AI Components</ui-tabs-trigger>
        </ui-tabs-list>

        <ui-tabs-content value="state">
          <p style="margin-bottom: 1.5rem; opacity: 0.8">
            Demonstrations of Effect-Atom state management patterns including
            global state, scoped registries, streams, and reactive updates.
          </p>
          <section class="grid">
            <div class="grid-cell">
              <div class="cell-header">
                <h3>Effect Box Counter</h3>
                <ui-tooltip content="Click the plus button to increment. Demonstrates basic Effect integration with Lit components.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <simple-element variant="destructive" size="icon-lg"></simple-element>
            </div>

            <div class="grid-cell">
              <div class="cell-header">
                <h3>Redacted Secrets</h3>
                <ui-tooltip content="Enter text to see it encrypted and redacted. Shows Effect's encryption capabilities with secure state management.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <atom-secrets></atom-secrets>
              <secret-encryptor placeholder="Enter your secrets..."></secret-encryptor>
            </div>

            <div class="grid-cell">
              <div class="cell-header">
                <h3>Reactive Element</h3>
                <ui-tooltip content="Increment the counter to see reactive property updates in real-time using Lit's reactive system.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <reactive-element size="icon-lg"></reactive-element>
            </div>

            <div class="grid-cell">
              <div class="cell-header">
                <h3>Atom Counter</h3>
                <ui-tooltip content="Counter using writable Result atom with error handling. Try decrementing below -3 to see error state. Demonstrates async state updates with loading indicators.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <atom-counter size="icon-lg"></atom-counter>
            </div>

            <div class="grid-cell">
              <div class="cell-header">
                <h3>Ansi Counter</h3>
                <ui-tooltip content="Counter with ANSI color-coded output. Demonstrates Effect's console logging with styled terminal output.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <ansi-counter size="icon-lg"></ansi-counter>
            </div>

            <div class="grid-cell">
              <div class="cell-header">
                <h3>Registry Demo (Global vs Scoped)</h3>
                <ui-tooltip content="Same status panel component with different registries. Global registry shares state across all instances, while scoped registry isolates state per instance.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <registry-demo variant="outline"></registry-demo>
            </div>

            <div class="grid-cell">
              <div class="cell-header">
                <h3>Stream Counter</h3>
                <ui-tooltip content="Real-time streaming counter using Effect Streams. Watch as values flow through the stream automatically.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <atom-stream-counter></atom-stream-counter>
            </div>

            <div class="grid-cell">
              <div class="cell-header">
                <h3>User Detail (Atom.family)</h3>
                <ui-tooltip content="Demonstrates Atom.family for parameterized state. Change the user ID to fetch different user data dynamically.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <user-detail userId="1"></user-detail>
            </div>

            <div class="grid-cell todo-cell">
              <div class="cell-header">
                <h3>Todo List</h3>
                <ui-tooltip content="Full-featured todo list with add, complete, and delete operations. Shows complex state management with arrays and mutations.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <todo-input></todo-input>
              <todo-list></todo-list>
            </div>
          </section>
        </ui-tabs-content>

        <ui-tabs-content value="forms">
          <p style="margin-bottom: 1.5rem; opacity: 0.8">
            Form components and input interactions showcasing validation,
            terminal prompts, and multi-step workflows.
          </p>
          <section class="grid">
            <div class="grid-cell">
              <div class="cell-header">
                <h3>User Registration Form</h3>
                <ui-tooltip content="Try submitting with invalid data to see Effect-based form validation and error handling in action.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <registration-form></registration-form>
            </div>

            <div class="grid-cell full-width-cell">
              <div class="cell-header">
                <h3>Database Configuration Setup</h3>
                <ui-tooltip content="Interactive terminal-style prompt system. Answer each question sequentially to build a configuration object.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <prompt-terminal id="config-prompt">
                <text-prompt
                  key="host"
                  message="What is your database host?"
                ></text-prompt>
                <text-prompt
                  key="port"
                  message="Which port should we use?"
                ></text-prompt>
                <text-prompt
                  key="database"
                  message="What is the database name?"
                ></text-prompt>
                <text-prompt
                  key="username"
                  message="Enter the username:"
                ></text-prompt>
                <text-prompt
                  key="pool_size"
                  message="How many connections in the pool?"
                ></text-prompt>
              </prompt-terminal>
            </div>

            <div class="grid-cell">
              <div class="cell-header">
                <h3>Toast Notifications</h3>
                <ui-tooltip content="Click to trigger different notification types. Demonstrates toast positioning, variants, and auto-dismiss functionality.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <toast-demo></toast-demo>
            </div>
          </section>
        </ui-tabs-content>

        <ui-tabs-content value="interactive">
          <p style="margin-bottom: 1.5rem; opacity: 0.8">
            Interactive games and visualizations built with Effect for game
            logic and state transitions.
          </p>
          <section class="grid">
            <div class="grid-cell">
              <div class="cell-header">
                <h3>Yahtzee Game</h3>
                <ui-tooltip content="Play Yahtzee with two players! Roll dice, select combinations, and track scores. Shows complex game state management.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <yahtzee-game>
                <yahtzee-status slot="status"></yahtzee-status>
                <yahtzee-player name="Player 1" playerIndex="0"></yahtzee-player>
                <yahtzee-player name="Player 2" playerIndex="1"></yahtzee-player>
              </yahtzee-game>
            </div>

            <div class="grid-cell">
              <div class="cell-header">
                <h3>Maze Generator</h3>
                <ui-tooltip content="Watch a maze generate using recursive backtracking algorithm. Adjust speed to see the generation process in action.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <maze-generator speed="50"></maze-generator>
            </div>
          </section>
        </ui-tabs-content>

        <ui-tabs-content value="ai">
          <p style="margin-bottom: 1.5rem; opacity: 0.8">
            AI-powered components demonstrating streaming responses and chat
            interfaces with Effect-based async state.
          </p>
          <section class="grid">
            <div class="grid-cell">
              <div class="cell-header">
                <h3>AI Text Generator</h3>
                <ui-tooltip content="Enter a prompt and watch AI generate text in real-time. Demonstrates streaming API integration with Effect.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <ai-text-generator></ai-text-generator>
            </div>

            <div class="grid-cell">
              <div class="cell-header">
                <h3>AI Chat</h3>
                <ui-tooltip content="Full conversational AI chat interface. Send messages and receive streaming responses with conversation history.">
                  <i class="fa-solid fa-circle-info"></i>
                </ui-tooltip>
              </div>
              <ai-chat></ai-chat>
            </div>
          </section>
        </ui-tabs-content>
      </ui-tabs>
      <footer
        class="footer"
        style="
          margin-top: 2rem;
          padding: 1rem;
          display: flex;
          justify-content: space-between;
        "
      >
        <a
          href="https://www.lloydrichards.dev/"
          target="_blank"
          rel="noopener noreferrer"
          >lloydrichards.dev</a
        >
        <a
          href="https://github.com/lloydrichards/proj_effect-box-web-components"
          target="_blank"
          rel="noopener noreferrer"
        >
          <i class="fa-solid fa-code" style="margin-right: 4px"></i>
          Repo
        </a>
      </footer>
    </div>
  </body>
</html>
